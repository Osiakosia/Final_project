{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">Service Records</h2>

    {% if user.is_authenticated %}
        <div class="text-end mb-3">
            <a href="{% url 'service_create' %}" class="btn btn-success">+ Add Service Record</a>
        </div>
    {% endif %}

    {% if servicerecord_list %}
        <div class="card shadow-sm">
            <div class="card-body p-0">
                <table class="table table-hover align-middle mb-0">
                    <thead class="table-dark text-center">
                        <tr>
                            <th>Date</th>
                            <th>Car</th>
                            <th>Description</th>
                            <th>Cost (â‚¬)</th>
                            {% if user.is_authenticated %}
                                <th>Actions</th>
                            {% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for service in servicerecord_list %}
                            <tr>
                                <td class="text-center">{{ service.service_date|date:"Y-m-d" }}</td>
                                <td>{{ service.car }}</td>
                                <td>{{ service.description }}</td>
                                <td class="text-center">{{ service.cost }}</td>

                                {% if user.is_authenticated %}
                                    <td class="text-center">
                                        <a href="{% url 'service_detail' service.pk %}" class="btn btn-info btn-sm">View</a>
                                        <a href="{% url 'service_update' service.pk %}" class="btn btn-warning btn-sm">Edit</a>
                                        <a href="{% url 'service_delete' service.pk %}" class="btn btn-danger btn-sm">Delete</a>
                                    </td>
                                {% endif %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    {% else %}
        <div class="alert alert-warning text-center mt-3">
            No service records available.
        </div>
    {% endif %}
</div>
{% endblock %}
